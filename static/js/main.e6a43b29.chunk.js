(this["webpackJsonpairswap-web"]=this["webpackJsonpairswap-web"]||[]).push([[0],{115:function(e,t,n){e.exports={balancesGrid:"Balances_balancesGrid__1j9mL",bold:"Balances_bold__38IeB"}},304:function(e,t,n){},306:function(e,t){},330:function(e,t){},331:function(e,t){},357:function(e,t){},359:function(e,t){},369:function(e,t){},371:function(e,t){},401:function(e,t){},533:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),c=n(105),s=n.n(c),o=(n(304),n(58)),i=n(172),l=n(4),d=n.n(l),u=n(25),f=n(38),b=n(56),h=n(112),p=function(){return Object(h.b)()},j=h.c,m=n(26),v=n(64);function x(e,t,n,a,r,c){return g.apply(this,arguments)}function g(){return(g=Object(u.a)(d.a.mark((function e(t,n,a,r,c,s){var o,i,l,f;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new v.Registry(t,s).getServers(n,a);case 2:return o=e.sent,i=o.map(function(){var e=Object(u.a)(d.a.mark((function e(t){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getSignerSideOrder(Object(b.toAtomicString)(r,18),n,a,c);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=6,Promise.allSettled(i);case 6:return l=e.sent,f=l.filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value})),e.abrupt("return",f);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.Light.getAddress(n.network.chainId),e.next=3,new v.ERC20(t).approve(a,n.getSigner());case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new v.Light(n.network.chainId,n).swap(t,n.getSigner());case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=Object(m.b)("transaction/submitTransaction"),A=Object(m.b)("transactions/declineTransaction"),S=Object(m.b)("transaction/mineTransaction"),N=Object(m.b)("transactions/revertTransaction"),T={connected:!1,address:null,chainId:null},I=Object(m.d)({name:"wallet",initialState:T,reducers:{setWalletConnected:function(e,t){e.connected=!0,e.address=t.payload.address,e.chainId=t.payload.chainId},setWalletDisconnected:function(){return T}}}),E=I.actions,F=E.setWalletConnected,L=E.setWalletDisconnected,B=I.reducer,R=n(13),W=Object(m.c)("orders/request",function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t.chainId,t.signerToken,t.senderToken,t.senderAmount,t.senderWallet,t.provider);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),M=Object(m.c)("orders/approve",function(){var e=Object(u.a)(d.a.mark((function e(t,n){var a,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.prev=1,e.next=4,O(t.token,t.library);case 4:(r=e.sent).hash&&(c={type:"Approval",hash:r.hash,status:"processing",tokenAddress:t.token},a(C(c)),t.library.once(r.hash,Object(u.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.library.getTransactionReceipt(r.hash);case 2:1===(n=e.sent).status?a(S(n.transactionHash)):a(N(n.transactionHash));case 4:case"end":return e.stop()}}),e)}))))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),a(A(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),D=Object(m.c)("orders/take",function(){var e=Object(u.a)(d.a.mark((function e(t,n){var a,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.prev=1,e.next=4,w(t.order,t.library);case 4:(r=e.sent).hash&&(c={type:"Order",order:t.order,hash:r.hash,status:"processing"},a(C(c)),t.library.once(r.hash,Object(u.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.library.getTransactionReceipt(r.hash);case 2:1===(n=e.sent).status?a(S(n.transactionHash)):a(N(n.transactionHash));case 4:case"end":return e.stop()}}),e)}))))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),a(A(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),q=Object(m.d)({name:"orders",initialState:{orders:[],status:"idle"},reducers:{clear:function(e){e.orders=[]}},extraReducers:function(e){e.addCase(W.pending,(function(e){e.status="requesting"})).addCase(W.fulfilled,(function(e,t){e.status="idle",e.orders=t.payload})).addCase(D.pending,(function(e){e.status="taking"})).addCase(D.fulfilled,(function(e,t){e.status="idle"})).addCase(F,(function(e){e.status="idle",e.orders=[]})).addCase(L,(function(e){e.status="idle",e.orders=[]}))}}),P=(q.actions.clear,function(e){return e.orders.orders.sort((function(e,t){if(e.signerAmount===t.signerAmount&&e.senderAmount===t.senderAmount)return parseInt(t.expiry)-parseInt(e.expiry);if(e.signerAmount===t.signerAmount){var n=R.a.from(e.senderAmount);return R.a.from(t.senderAmount).lt(n)?1:-1}var a=R.a.from(e.signerAmount);return R.a.from(t.signerAmount).gt(a)?1:-1}))[0]}),_=function(e){return e.orders.status},J=q.reducer,U=n(65);function H(e,t,n){for(var a in e.all)if(e.all[a].hash===t){e.all[a]=Object(U.a)(Object(U.a)({},e.all[a]),{},{status:n});break}}var G,V=Object(m.d)({name:"transactions",initialState:{all:[]},reducers:{clear:function(e){e.all=[]},setTransactions:function(e,t){try{e.all=t.payload.all}catch(n){console.error(n),e.all=[]}}},extraReducers:function(e){e.addCase(C,(function(e,t){e.all.push(t.payload)})),e.addCase(A,(function(e,t){console.error(t.payload)})),e.addCase(N,(function(e,t){H(e,t.payload.hash,"reverted")})),e.addCase(S,(function(e,t){H(e,t.payload,"succeeded")}))}}),Z=V.actions,z=(Z.clear,Z.setTransactions),K=function(e){return e.transactions.all},Q=V.reducer,Y=n(137),$=n(129),X=n(110),ee=n(50),te=(n(263),G={},Object(X.a)(G,ee.chainIds.MAINNET,["0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2","0xdac17f958d2ee523a2206206994597c13d831ec7","0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48","0x6b175474e89094c44da98b954eedeac495271d0f","0x27054b13b1b798b345b591a4d22e6562d47ea75a"]),Object(X.a)(G,ee.chainIds.RINKEBY,["0x5592ec0cfb4dbc12d3ab100b257153436a1f0fea","0xc778417e063141139fce010982780140aa0cd5ab"]),G),ne=function(e,t){return"airswap/activeTokens/".concat(e,"/").concat(t)},ae=function(e,t){var n=(localStorage.getItem(ne(e,t))||"").split(",").filter((function(e){return e.length}));return n.length&&n||te[t]||[]},re=function(e,t){return"airswap/transactions/".concat(e,"/").concat(t)},ce=Object(m.c)("metadata/fetchTokens",function(){var e=Object(u.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.getState(),(r=a.wallet).connected){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,Object(Y.fetchTokens)(r.chainId);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),se=Object(m.d)({name:"metadata",initialState:{tokens:{all:{},active:[]}},reducers:{addActiveToken:function(e,t){var n=t.payload.trim().toLowerCase();e.tokens.active.includes(n)||e.tokens.active.push(n)},removeActiveToken:function(e,t){e.tokens.active.includes(t.payload)&&(e.tokens.active=e.tokens.active.filter((function(e){return e!==t.payload})))}},extraReducers:function(e){e.addCase(ce.pending,(function(e){})).addCase(ce.fulfilled,(function(e,t){var n=t.payload;e.tokens.all=n.reduce((function(e,t){var n=t.address;return e[n]||(e[n]=t),e}),{})})).addCase(ce.rejected,(function(e){})).addCase(F,(function(e,t){var n=t.payload,a=n.chainId,r=n.address;e.tokens.active=ae(r,a)||te[a]||[]})).addCase(L,(function(e){e.tokens.active=[]}))}}),oe=se.actions.addActiveToken,ie=Object($.a)([function(e){return e.metadata.tokens.active},function(e){return e.metadata.tokens.all}],(function(e,t){return Object.values(t).filter((function(t){return e.includes(t.address)}))})),le=se.reducer,de=n(541),ue=n(540),fe=n(37),be=n.n(fe),he=n(8),pe=function(e){var t=e.children,n=e.className;return Object(he.jsx)("div",{className:be()("p-4 flex bg-white dark:bg-black",n),children:t})},je=n(268),me=n(264),ve=function(e){var t=e.className;return Object(he.jsx)("div",{className:be()("flex items-center justify-center h-full w-full",t),children:Object(he.jsx)(me.a,{className:"animate-spin"})})},xe=function(e){var t=e.withAmount,n=e.label,a=e.className,r=e.tokens,c=e.amount,s=e.onAmountChange,o=e.token,i=e.onTokenChange,l=Object(de.a)(["common","orders"]).t;return Object(he.jsxs)("div",{className:be()("flex flex-col",a),children:[Object(he.jsx)("div",{className:"font-bold text-sm",children:n}),Object(he.jsxs)("div",{className:be()("flex justify-between pb-1 items-center","border-b border-black border-opacity-20","dark:border-white  dark:border-opacity-20"),children:[t?Object(he.jsx)("input",{type:"text",className:be()("bg-transparent border-0 px-0 py-0","placeholder-gray-500 text-sm","dark:text-white"),value:c,onChange:s,placeholder:"0"}):Object(he.jsx)("span",{className:"text-gray-500 text-sm",children:o?"":l("orders:chooseToken")}),Object(he.jsxs)("div",{className:"flex font-bold items-center",children:[r?Object(he.jsxs)("select",{dir:"rtl",className:be()("-mr-6 pr-6 border-0 bg-transparent appearance-none","text-sm","dark:text-white",{"text-gray-500":!o}),value:o,onChange:i,children:[Object(he.jsxs)("option",{children:["\u2026",l("common:select")]}),r.map((function(e){return Object(he.jsx)("option",{value:e.address,children:e.symbol},e.address)}))]}):Object(he.jsx)(ve,{className:"mx-2"}),Object(he.jsx)(je.a,{className:"text-primary text-xl pointer-events-none"})]})]})]})},ge=function(e){var t=e.expiryTime,n=void 0===t?Date.now()/1e3+300:t,r=e.onTimerComplete,c=Object(a.useState)(Math.floor(n-Date.now()/1e3)),s=Object(f.a)(c,2),o=s[0],i=s[1];return Object(a.useEffect)((function(){var e=setInterval((function(){var t=Math.floor(n-Date.now()/1e3);if(t<=0)return i(0),clearInterval(e),void r();i(t)}),1e3);return function(){clearInterval(e)}}),[n,r]),void 0!==o?Object(he.jsxs)("span",{children:[Math.floor(o/60),":",Math.floor(o%60)<10?"0".concat(Math.floor(o%60)):Math.floor(o%60)]}):null},Oe=n(279),ke={neutral:"bg-gray-200 text-black dark:bg-gray-700 dark:text-white",primary:"bg-primary text-white",positive:"bg-green-700 text-white",destructive:"bg-red-700 text-white"},we={centered:"justify-center","left-justified":"justify-start"},ye=function(e){var t=e.children,n=e.className,a=void 0===n?"":n,r=e.intent,c=void 0===r?"neutral":r,s=e.variant,o=void 0===s?"centered":s,i=e.disabled,l=void 0!==i&&i,d=e.loading,u=void 0!==d&&d,f=e.onClick,b=Object(Oe.a)(e,["children","className","intent","variant","disabled","loading","onClick"]),h=Array.isArray(o)?o:[o];return Object(he.jsx)("button",Object(U.a)(Object(U.a)({className:be()("px-2 py-1 rounded-sm",ke[c],a,{"opacity-50":l,"pointer-events-none":l||u,"cursor-wait":u}),onClick:function(e){!u&&f&&f(e)}},b),{},{children:Object(he.jsxs)("div",{className:be()("flex flex-row items-center",h.map((function(e){return we[e]}))),children:[Object(he.jsx)("div",{className:be()("transition-opacity",{"opacity-20":u,"opacity-100":!u}),children:t}),u&&Object(he.jsx)(ve,{className:"absolute"})]})}))};function Ce(){var e=j(P),t=j(_),n=j(K),r=p(),c=j(ie),s=Object(a.useState)(),i=Object(f.a)(s,2),l=i[0],h=i[1],m=Object(a.useState)(),v=Object(f.a)(m,2),x=v[0],g=v[1],O=Object(a.useState)("0.01"),k=Object(f.a)(O,2),w=k[0],y=k[1],C=Object(o.b)(),A=C.chainId,S=C.account,N=C.library,T=C.active,I=Object(de.a)(["orders","common"]).t,E=Object(ue.a)().trackEvent,F=null;e&&(F=Object(b.toDecimalString)(e.signerAmount,6));return T&&A?Object(he.jsxs)(pe,{className:"flex-col m-4 w-72",children:[Object(he.jsx)(xe,{tokens:c,withAmount:!0,amount:w,onAmountChange:function(e){return y(e.currentTarget.value)},className:"mb-2",label:I("orders:send"),token:l,onTokenChange:function(e){return h(e.currentTarget.value)}}),Object(he.jsx)(xe,{tokens:c,withAmount:!1,className:"mb-2",label:"Receive",token:x,onTokenChange:function(e){return g(e.currentTarget.value)}}),Object(he.jsx)(ye,{className:"w-full mt-2",intent:"primary",disabled:!l||!x||!w,loading:"requesting"===t,onClick:function(){r(W({chainId:A,senderToken:l,senderAmount:w,signerToken:x,senderWallet:S,provider:N})),E({category:"order",action:"request"})},children:I("orders:request")}),F?Object(he.jsxs)("div",{children:[e?Object(he.jsxs)(he.Fragment,{children:[Object(he.jsxs)("div",{children:["Amount to receive: ",F]}),Object(he.jsxs)("p",{children:["Quote expires in\xa0",Object(he.jsx)(ge,{expiryTime:parseInt(e.expiry),onTimerComplete:function(){r(W({chainId:A,senderToken:l,senderAmount:w,signerToken:x,senderWallet:S,provider:N})),E({category:"order",action:"request"})}})]})]}):null,Object(he.jsxs)("div",{className:"flex gap-2",children:[Object(he.jsx)(ye,{className:"flex-1","aria-label":I("orders:approve",{context:"aria"}),loading:"processing"===function(e){if(void 0===e)return null;for(var t=0;t<n.length;t++)if("Approval"===n[t].type){var a=n[t];if(a.tokenAddress===e)return a.status}return null}(l),onClick:function(){return r(M({token:l,library:N}))},children:I("orders:approve")}),Object(he.jsx)(ye,{className:"flex-1","aria-label":I("orders:take",{context:"aria"}),loading:"taking"===t,onClick:Object(u.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r(D({order:e,library:N})));case 1:case"end":return t.stop()}}),t)}))),children:I("orders:take")})]})]}):Object(he.jsx)("span",{})]}):null}var Ae,Se=n(140),Ne=n(111),Te=n(269),Ie=n.n(Te),Ee=n(270),Fe=n.n(Ee),Le=function(e){var t=e.address,n=e.className,a=e.isConnecting,r=e.onConnectWalletClicked,c=e.onDisconnectWalletClicked,s=Object(de.a)(["wallet"]).t;return Object(he.jsx)("div",{className:n,children:t?Object(he.jsxs)("div",{className:be()("flex flex-row items-center","px-2 py-1","rounded-sm","bg-gray-200 dark:bg-gray-800"),children:[Object(he.jsx)(Fe.a,{size:8,scale:3,seed:t,className:"-ml-1 rounded-sm mr-2",bgColor:"black",color:"#2b72ff"}),Object(he.jsx)("span",{children:Ie()(t)}),Object(he.jsx)("button",{className:"ml-2","aria-label":s("wallet:disconnectWallet"),onClick:c,children:Object(he.jsx)(Ne.a,{})})]}):Object(he.jsx)(ye,{intent:"primary",loading:a,onClick:r,children:s("wallet:connectWallet")})})},Be=(n(86),n(271)),Re=[{name:"MetaMask",logo:n.p+"static/media/metamask.45038d58.svg",getConnector:function(){return new Be.a({supportedChainIds:[1,3,4,5,42]})}},{name:"WalletConnect",logo:n.p+"static/media/walletconnect.dfa25e47.svg",getConnector:function(){return new Se.a({rpc:{1:"",4:""}})}}],We=function(e){var t=e.onProviderSelected;return Object(he.jsx)("div",{className:"flex flex-col gap-2",children:Re.map((function(e){return Object(he.jsx)(ye,{variant:"left-justified",intent:"neutral",onClick:function(){t(e)},children:Object(he.jsxs)("div",{className:"flex gap-2 items-center pr-2",children:[Object(he.jsx)("img",{src:e.logo,alt:"".concat(e.name," logo"),className:"w-12 h-12"}),Object(he.jsx)("span",{className:"flex-1",children:e.name})]})},e.name)}))})},Me=n(141),De=n.n(Me),qe=n(33),Pe=n(272),_e=n(273),Je=n.n(_e),Ue=n(274),He=n(89),Ge=new qe.ethers.utils.Interface(JSON.stringify(Pe.abi)),Ve=new qe.ethers.utils.Interface(Ue),Ze=function(e,t){return new qe.ethers.Contract(Je.a[e],Ge,t)},ze=function(){var e=Object(u.a)(d.a.mark((function e(t,n){var a,r,c,s,o,i,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.chainId,r=n.provider,c=n.tokenAddresses,s=n.walletAddress,o=Ze(a,r),i="walletBalances"===t?[s,c]:[s,v.Light.getAddress(a),c],e.next=5,o[t].apply(null,i);case 5:return l=e.sent,e.abrupt("return",l.map((function(e){return e.toString()})));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ke=ze.bind(null,"walletBalances"),Qe=ze.bind(null,"walletAllowances");Ae=function(e){var t=e.activeTokenAddresses,n=e.walletAddress,a=e.provider,r=e.onBalanceChange,c=e.spenderAddress,s=e.onApproval,o={out:{topics:[[Object(He.id)("Transfer(address,address,uint256)"),Object(He.id)("Approval(address,address,uint256)")],Object(He.hexZeroPad)(n,32)]},in:{topics:[Object(He.id)("Transfer(address,address,uint256)"),[],Object(He.hexZeroPad)(n,32)]}},i=[];return Object.keys(o).forEach((function(e){var n=e,l=o[n];function d(e){var a=e.address.toLowerCase();if(t.includes(a)){var o=Ve.parseLog(e),i="Approval"===o.name;if(!i||o.args[1].toLowerCase()===c){var l=o.args[2];i?s(a,l):r(a,l,n)}}}a.on(l,d),i.push(a.off.bind(a,l,d))})),function(){i.forEach((function(e){return e()}))}};var Ye={status:"idle",lastFetch:null,inFlightFetchTokens:null,values:{}},$e=function(e){return Object(m.b)("".concat(e,"/setInFlightRequestTokens"))},Xe=function(e){var t={balances:Ke,allowances:Qe};return Object(m.c)("".concat(e,"/requestForActiveTokens"),function(){var n=Object(u.a)(d.a.mark((function n(a,r){var c,s,o,i,l,u,f,b;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=r.getState,s=r.dispatch,n.prev=1,o=c(),i=o.metadata.tokens.active,l=o.wallet,u=l.chainId,f=l.address,s($e(e)(i)),n.next=8,t[e](Object(U.a)(Object(U.a)({},a),{},{chainId:u,walletAddress:f,tokenAddresses:i}));case 8:return b=n.sent,n.abrupt("return",i.map((function(e,t){return{address:e,amount:b[t]}})));case 12:return n.prev=12,n.t0=n.catch(1),console.error("Error fetching ".concat(e,": ")+n.t0.message),n.abrupt("return",[]);case 16:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(e,t){return n.apply(this,arguments)}}(),{condition:function(t,n){var a=n.getState,r=a()[e];return"fetching"!==r.status||(r.inFlightFetchTokens?a().metadata.tokens.active.length>r.inFlightFetchTokens.length:void 0)}})},et=function(e,t){return Object(m.d)({name:e,initialState:Ye,reducers:{incrementBy:function(e,t){var n=R.a.from(e.values[t.payload.tokenAddress.toLowerCase()]||0);e.values[t.payload.tokenAddress.toLowerCase()]=n.add(t.payload.amount).toString()},decrementBy:function(e,t){var n=R.a.from(e.values[t.payload.tokenAddress.toLowerCase()]||0).sub(t.payload.amount);n.lt("0")&&(n=R.a.from("0")),e.values[t.payload.tokenAddress.toLowerCase()]=n.toString()},set:function(e,t){e.values[t.payload.tokenAddress.toLowerCase()]=t.payload.amount}},extraReducers:function(n){n.addCase(F,(function(){return Ye})).addCase(t.pending,(function(e){e.status="fetching"})).addCase($e(e),(function(e,t){e.inFlightFetchTokens=t.payload})).addCase(t.fulfilled,(function(e,t){e.lastFetch=Date.now();var n=t.payload;null===n||void 0===n||n.forEach((function(t){var n=t.address,a=t.amount;e.values[n]=a})),e.inFlightFetchTokens&&n.every((function(t,n){return e.inFlightFetchTokens[n]===t.address}))&&(e.inFlightFetchTokens=null,e.status="idle")})).addCase(t.rejected,(function(e,t){e.status="failed"}))}})},tt=function(e){return e.balances},nt=function(e){return e.allowances},at=Xe("balances"),rt=Xe("allowances"),ct=et("balances",at),st=et("allowances",rt),ot=ct.actions,it=ot.incrementBy,lt=ot.decrementBy,dt=(ot.set,st.actions),ut=(dt.incrementBy,dt.decrementBy,dt.set),ft=(ct.actions,st.actions,ct.reducer),bt=st.reducer,ht="airswap/lastConnectedAccount",pt=function(){var e=Object(o.b)(),t=e.chainId,n=e.account,r=e.activate,c=e.deactivate,s=e.active,i=e.library,l=p(),d=j(ie),u=j(tt),b=Object(ue.a)().trackPageView,h=Object(de.a)(["common","wallet"]).t,m=Object(a.useState)(!1),x=Object(f.a)(m,2),g=x[0],O=x[1],k=Object(a.useState)(!1),w=Object(f.a)(k,2),y=w[0],C=w[1],A=Object(a.useState)(),S=Object(f.a)(A,2),N=S[0],T=S[1],I=Object(a.useState)(),E=Object(f.a)(I,2),B=E[0],R=E[1];return Object(a.useEffect)((function(){b({documentTitle:"Swap Page",href:"https://airswap.io"});var e=function(){try{var e=localStorage.getItem(ht);if(!e)throw new Error("No connected accounts saved");var t=e.split("/"),n=Object(f.a)(t,2),a=n[0],r=n[1],c=Re.find((function(e){return e.name===a}));if(!c)throw new Error("Could not find provider: ".concat(a));return{provider:c,address:r}}catch(s){return null}}();if(e){C(!0);var t=e.provider.getConnector();T(t),R(e.provider),r(t).finally((function(){return C(!1)}))}}),[r,b]),Object(a.useEffect)((function(){s&&n&&t&&i&&N&&B?(l(F({chainId:t,address:n})),function(e,t){localStorage.setItem(ht,"".concat(t.name,"/").concat(e))}(n,B),l(ce()),l(rt({provider:i})),l(at({provider:i}))):l(L())}),[s,n,t,l,i,N,B]),Object(a.useEffect)((function(){var e;if(i&&n&&N&&void 0!==t&&d.length&&null!==u.lastFetch&&"idle"===u.status)return d.length&&(e=Ae({activeTokenAddresses:d.map((function(e){return e.address})),provider:i,walletAddress:n,spenderAddress:v.Light.getAddress(),onBalanceChange:function(e,t,n){l(("in"===n?it:lt)({tokenAddress:e,amount:t.toString()}))},onApproval:function(e,t){l(ut({tokenAddress:e,amount:t.toString()}))}})),function(){e&&e()}}),[d,n,i,N,l,t,u.lastFetch,u.status]),Object(he.jsxs)("div",{children:[Object(he.jsxs)("div",{children:[h("common:chainId"),": ",t]}),Object(he.jsx)(De.a,{isOpen:g,onRequestClose:function(){return O(!1)},overlayClassName:"absolute inset-0 flex flex-col items-center justify-center bg-black bg-opacity-50 p-10",className:"w-64 p-4 rounded-sm bg-white dark:bg-gray-800 shadow-lg",children:Object(he.jsx)(We,{onProviderSelected:function(e){R(e);var t=e.getConnector();T(t),O(!1),C(!0),r(t).finally((function(){return C(!1)}))}})}),Object(he.jsx)(Le,{address:n,onConnectWalletClicked:function(){O(!0)},onDisconnectWalletClicked:function(){localStorage.setItem(ht,""),c(),N instanceof Se.a&&N.close()},isConnecting:y})]})};function jt(){var e=j(K),t=p(),n=Object(o.b)(),r=n.active,c=n.chainId,s=n.library,i=n.account;if(Object(a.useEffect)((function(){var e=!1;if(c&&i&&s){var n=JSON.parse(localStorage.getItem(re(i,c)))||{all:[]};t(z(n)),n.all.forEach(function(){var n=Object(u.a)(d.a.mark((function n(a){var r,c,o,i;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("processing"!==a.status){n.next=39;break}return n.next=3,s.getTransactionReceipt(a.hash);case 3:if(null===(r=n.sent)){n.next=12;break}if(!e){n.next=7;break}return n.abrupt("return");case 7:return 1===(c=r.status)?t(S(a.hash)):0===c&&t(N({hash:a.hash,reason:"Reverted"})),n.abrupt("return");case 12:return n.next=14,s.getTransaction(a.hash);case 14:if(!(o=n.sent)){n.next=29;break}return n.prev=16,n.next=19,o.wait(1);case 19:e||t(S(a.hash)),n.next=26;break;case 22:n.prev=22,n.t0=n.catch(16),console.error(n.t0),e||t(N({hash:a.hash,reason:"Reverted"}));case 26:return n.abrupt("return");case 29:i=Date.now()+18e5;case 30:if(!(null===r&&Date.now()<=i)){n.next=38;break}return n.next=33,new Promise((function(e){return setTimeout(e,3e4)}));case 33:return n.next=35,s.getTransactionReceipt(a.hash);case 35:r=n.sent,n.next=30;break;case 38:r&&0!==r.status?e||t(S(a.hash)):e||t(N({hash:a.hash,reason:"Reverted"}));case 39:case"end":return n.stop()}}),n,null,[[16,22]])})));return function(e){return n.apply(this,arguments)}}())}return function(){e=!0}}),[c,t,s,i]),!r||!c)return null;var l={succeeded:"\u2705",reverted:"\ud83d\udeab",processing:"\u23f3"};return Object(he.jsx)("div",{children:e.map((function(e){return Object(he.jsxs)("div",{children:[l[e.status],":",Object(he.jsx)("a",{target:"_blank",rel:"noreferrer",href:"".concat(Object(b.getEtherscanURL)("".concat(c),e.hash)),children:e.hash})]},e.hash)}))})}var mt=n(115),vt=n.n(mt),xt=n(55),gt=function(){var e=Object(o.b)(),t=e.active,n=e.library,r=j(ie),c=p(),s=j(tt),i=j(nt),l=Object(a.useState)(""),d=Object(f.a)(l,2),u=d[0],b=d[1],h=Object(de.a)(["balances","common"]).t;return t?Object(he.jsxs)("div",{children:[Object(he.jsx)("hr",{}),Object(he.jsx)("h4",{children:h("balances:tokenBalances")}),Object(he.jsxs)("div",{className:vt.a.balancesGrid,children:[Object(he.jsx)("span",{className:vt.a.bold,children:h("balances:symbol")}),Object(he.jsx)("span",{className:vt.a.bold,children:h("balances:balance")}),Object(he.jsx)("span",{className:vt.a.bold,children:h("balances:allowance")}),r.map((function(e){var t=s.values[e.address],n=i.values[e.address];return Object(he.jsxs)(a.Fragment,{children:[Object(he.jsxs)("span",{children:[e.symbol,":"]}),Object(he.jsx)("span",{children:null!=t?Object(xt.formatUnits)(t,e.decimals):h("common:fetching")}),Object(he.jsx)("span",{children:null!=n?Object(xt.formatUnits)(n,e.decimals):h("common:fetching")})]},"".concat(e.address,"-balance"))}))]}),Object(he.jsx)("input",{type:"text",value:u,onChange:function(e){b(e.target.value)}}),Object(he.jsx)(ye,{type:"button",onClick:function(){c(oe(u)),c(at({provider:n})),c(rt({provider:n})),b("")},children:h("balances:addToTokenSet")}),Object(he.jsx)("hr",{})]}):null},Ot=n(176),kt=n(114),wt=n(276),yt=n(278);Ot.a.use(wt.a).use(yt.a).use(kt.e).init({fallbackLng:"en",ns:"common",load:"languageOnly",debug:!1,interpolation:{escapeValue:!1},react:{useSuspense:!0},backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"}});Ot.a;function Ct(){document.documentElement.classList.add("dark"),localStorage["airswap/theme"]="dark"}function At(){document.documentElement.classList.remove("dark"),localStorage["airswap/theme"]="light"}"dark"===localStorage["airswap/theme"]||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?Ct():At();var St=function(e){var t=e.className,n=Object(a.useState)(),r=Object(f.a)(n,2),c=r[0],s=r[1];return Object(a.useEffect)((function(){s("dark"===localStorage["airswap/theme"])}),[]),Object(he.jsx)("button",{onClick:function(){c?At():Ct(),s((function(e){return!e}))},className:be()("px-4 py-2 text-2xl",t),children:c?Object(he.jsx)(Ne.b,{className:"-m-2"}):Object(he.jsx)(Ne.c,{className:"-m-2"})})};function Nt(e){var t=new i.a(e);return t.pollingInterval=12e3,t}var Tt=function(){return Object(he.jsx)(o.a,{getLibrary:Nt,children:Object(he.jsx)(a.Suspense,{fallback:"Loading...",children:Object(he.jsxs)("div",{className:"flex flex-col items-center",children:[Object(he.jsx)(pt,{}),Object(he.jsx)(Ce,{}),Object(he.jsx)(jt,{}),"\u2620\ufe0f Use at your own risk",Object(he.jsx)(gt,{}),Object(he.jsx)(St,{className:"m-4"})]})})})},It=Object(m.a)({reducer:{allowances:bt,transactions:Q,balances:ft,metadata:le,orders:J,wallet:B}});!function(){var e,t={},n={};It.subscribe((function(){var a=It.getState(),r=a.wallet,c=a.metadata,s=a.transactions;if(r.connected){if(e!==(e=s)){var o=JSON.parse(localStorage.getItem(re(r.address,r.chainId)))||{all:[]};void 0===n[r.address]&&(n[r.address]={},n[r.address][r.chainId]=o.all),s.all.length&&n[r.address][r.chainId]!==s.all&&(n[r.address][r.chainId]=s.all,localStorage.setItem(re(r.address,r.chainId),JSON.stringify(s)))}t[r.address]||(t[r.address]={});var i=t[r.address][r.chainId];c.tokens.active.length&&i!==c.tokens.active&&(t[r.address][r.chainId]=c.tokens.active,localStorage.setItem(ne(r.address,r.chainId),c.tokens.active.join(",")))}}))}();Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Et=n(539),Ft=n(537),Lt=Object(Et.a)({urlBase:"https://airswap.matomo.cloud/",siteId:1,srcUrl:"https://cdn.matomo.cloud/airswap.matomo.cloud/matomo.js",disabled:!1,heartBeat:{active:!0,seconds:10},linkTracking:!1,configurations:{disableCookies:!0,setSecureCookie:!0,setRequestMethod:"POST"}});De.a.setAppElement("#root"),s.a.render(Object(he.jsx)(r.a.StrictMode,{children:Object(he.jsx)(Ft.a,{value:Lt,children:Object(he.jsx)(h.a,{store:It,children:Object(he.jsx)(Tt,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[533,1,2]]]);
//# sourceMappingURL=main.e6a43b29.chunk.js.map